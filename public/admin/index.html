<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Magazine CMS</title>

  <!-- Prevent auto-init (no config.yml) -->
  <script>window.CMS_MANUAL_INIT = true;</script>
</head>
<body>
  <!-- Mount point -->
  <div id="nc-root"></div>

  <!-- Load the all-in-one Netlify-CMS bundle -->
  <script src="https://unpkg.com/netlify-cms@^2/dist/netlify-cms.js"></script>

  <!-- Inline config -->
  <script>
    CMS.init({
      config: {
        backend: {
          name: "github",
          repo: "EduGonO/bcphl-tests",
          branch: "main",
          open_authoring: true
        },
        site_url: "https://bcphl-test.vercel.app",
        logo_url: "/favicon.ico",

        // Upload into the articleâ€™s own folder
        media_folder: "texts/{{path}}",
        public_folder: "/texts/{{path}}",

        collections: [
          {
            name: "articles",
            label: "Articles",
            folder: "texts",
            create: true,
            nested: { depth: 2 },
            slug: "{{filename}}",
            extension: "md",
            format: "frontmatter",
            fields: [
              { name: "title",        label: "Titre",        widget: "string" },
              { name: "author",       label: "Auteur",       widget: "string", default: "Unknown Author" },
              { name: "date",         label: "Date",         widget: "datetime" },
              { name: "header-image", label: "Header Image", widget: "image",  required: false },
              {
                name: "media",
                label: "Gallery",
                widget: "list",
                required: false,
                // MUST include a name on the field itself:
                field: {
                  name:  "media",
                  label: "Image",
                  widget: "image"
                }
              },
              { name: "body",         label: "Texte",        widget: "markdown" }
            ]
          }
        ]
      }
    });
  </script>
</body>
</html>
